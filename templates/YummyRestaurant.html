{% extends "menu.html" %} {% block title %}Yummy Restaurant{% endblock %}
{%block content %}
<script>
  const urlParams = new URLSearchParams(window.location.search);
  const id = urlParams.get("id");
    function addToCart(id) {
      var quantity = document.getElementById(id).value;
      if (quantity == 0){
        alert("Please enter a quantity");
        return;
      }
      var item = {
        'id': id,
        'quantity': quantity,
      };
      fetch('/savefood', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(item)
      })
      .then(response => response.json())
      .then(data => {
        if (data.message == "success") {
          alert("Item added to cart");
        } else {
          alert("Item not added to cart");
        }
      })
        .catch(error => console.error(error));
      }
</script>
<div class="album py-5 bg-body-tertiary">
  <div class="container">
    <div
      id="items"
      class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3"
    >
    {%if data%}
    {% for item in data %}
    <div id="item" class="col">
      <div class="card shadow-sm">
        <img src="{{url_for('static', filename=item.image)}}" class="bd-placeholder-img card-img-top" width="100%" height="300" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">
        <div class="card-body">
        <center><p class="card-title"><h1>{{item.name}}</h1></p></center>
        <p class="card-text">{{item.description}}</p>
        <div class="d-flex justify-content-between align-items-center">
          <p class="card-text">price: ${{item.price}} </p>
          <small class="text-body-secondary" >{{item.category}}</small>
        </div>
        <div class="d-flex justify-content-between align-items-center">
          <div class="btn-group">
            <input type="number" id="{{item.id}}" name="{{item.id}}" value="0" min="1" max="100">
            <button type="button" onclick="addToCart({{item.id}})" class="btn btn-primary" value="{{item.id}}">Add to Cart</button>
          </div>
          <small class="text-body-secondary">{{item.stock}}</small>
        </div>
        </div>
      </div>
    </div>
    {% endfor %}
    {% endif %}
    </div>
    <br>
    <center>
      <div id="pageNumber" class="btn-group me-2 " role="group" aria-label="First group">
        {%for i in range(dataPage) %}
        <button type="button" class="btn btn-primary" onclick="foodpage({{i+1}})">{{i+1}}</button>
        {%endfor%}
      </div>
    </center>
  </div>
</div>
{% endblock %}
